<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø®Ø§Ø¯Ù…ÛŒ</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Vazirmatn', sans-serif;
    -webkit-tap-highlight-color: transparent;
}

:root {
    --primary: #6366f1;
    --primary-dark: #4f46e5;
    --secondary: #8b5cf6;
    --success: #10b981;
    --danger: #ef4444;
    --warning: #f59e0b;
    --info: #3b82f6;
    --dark: #1f2937;
    --light: #f9fafb;
    --gray: #6b7280;
    --border: #e5e7eb;
    --shadow: rgba(0, 0, 0, 0.1);
    --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

body {
    background: var(--light);
    color: var(--dark);
    overflow-x: hidden;
    padding-bottom: 80px;
}

/* Header */
.header {
    background: var(--bg-gradient);
    color: white;
    padding: 15px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 4px 12px var(--shadow);
    position: sticky;
    top: 0;
    z-index: 1000;
}

.header-title {
    font-size: 20px;
    font-weight: 800;
    display: flex;
    align-items: center;
    gap: 10px;
}

.header-logo {
    width: 35px;
    height: 35px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
}

/* Bottom Navigation - Instagram Style */
.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: white;
    display: flex;
    justify-content: space-around;
    padding: 10px 0;
    box-shadow: 0 -2px 10px var(--shadow);
    z-index: 1000;
    border-top: 1px solid var(--border);
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    cursor: pointer;
    padding: 5px 15px;
    transition: all 0.3s;
    color: var(--gray);
    text-decoration: none;
}

.nav-item.active {
    color: var(--primary);
}

.nav-icon {
    font-size: 24px;
    transition: transform 0.3s;
}

.nav-item.active .nav-icon {
    transform: scale(1.2);
}

.nav-label {
    font-size: 11px;
    font-weight: 600;
}

/* Page Container */
.page {
    display: none;
    padding: 20px;
    animation: fadeIn 0.3s;
}

.page.active {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Cards */
.card {
    background: white;
    border-radius: 16px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 8px var(--shadow);
}

.card-header {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 15px;
    color: var(--dark);
    display: flex;
    align-items: center;
    gap: 10px;
}

.card-icon {
    width: 35px;
    height: 35px;
    background: var(--bg-gradient);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 18px;
}

/* Currency Cards */
.currency-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
}

.currency-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 16px;
    padding: 20px;
    color: white;
    box-shadow: 0 4px 12px rgba(102, 102, 255, 0.3);
    position: relative;
    overflow: hidden;
}

.currency-card::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
}

.currency-name {
    font-size: 14px;
    opacity: 0.9;
    margin-bottom: 10px;
}

.currency-amount {
    font-size: 24px;
    font-weight: 800;
    margin-bottom: 5px;
}

.currency-flag {
    position: absolute;
    top: 10px;
    left: 10px;
    font-size: 24px;
}

/* Forms */
.form-group {
    margin-bottom: 15px;
}

.form-label {
    display: block;
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--dark);
}

.form-input,
.form-select {
    width: 100%;
    padding: 12px 15px;
    border: 2px solid var(--border);
    border-radius: 12px;
    font-size: 15px;
    transition: all 0.3s;
    background: white;
}

.form-input:focus,
.form-select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

/* Buttons */
.btn {
    padding: 12px 24px;
    border-radius: 12px;
    border: none;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.btn-primary {
    background: var(--bg-gradient);
    color: white;
    box-shadow: 0 4px 12px rgba(102, 102, 241, 0.3);
}

.btn-primary:active {
    transform: scale(0.98);
}

.btn-success {
    background: var(--success);
    color: white;
}

.btn-danger {
    background: var(--danger);
    color: white;
}

.btn-block {
    width: 100%;
}

/* Transaction List */
.transaction-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.transaction-item {
    background: white;
    border-radius: 12px;
    padding: 15px;
    display: flex;
    align-items: center;
    gap: 15px;
    box-shadow: 0 2px 6px var(--shadow);
}

.transaction-icon {
    width: 45px;
    height: 45px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    flex-shrink: 0;
}

.transaction-icon.income {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success);
}

.transaction-icon.expense {
    background: rgba(239, 68, 68, 0.1);
    color: var(--danger);
}

.transaction-icon.transfer {
    background: rgba(59, 130, 246, 0.1);
    color: var(--info);
}

.transaction-info {
    flex: 1;
}

.transaction-title {
    font-size: 15px;
    font-weight: 600;
    margin-bottom: 4px;
}

.transaction-desc {
    font-size: 13px;
    color: var(--gray);
}

.transaction-amount {
    font-size: 16px;
    font-weight: 700;
}

.transaction-amount.income {
    color: var(--success);
}

.transaction-amount.expense {
    color: var(--danger);
}

/* Stats */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-bottom: 20px;
}

.stat-card {
    background: white;
    border-radius: 12px;
    padding: 15px;
    text-align: center;
    box-shadow: 0 2px 6px var(--shadow);
}

.stat-value {
    font-size: 24px;
    font-weight: 800;
    color: var(--primary);
    margin-bottom: 5px;
}

.stat-label {
    font-size: 13px;
    color: var(--gray);
}

/* Country Selector */
.country-selector {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-bottom: 20px;
}

.country-btn {
    padding: 12px;
    border: 2px solid var(--border);
    border-radius: 12px;
    background: white;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
}

.country-btn.active {
    border-color: var(--primary);
    background: rgba(99, 102, 241, 0.05);
}

.country-flag {
    font-size: 24px;
}

.country-name {
    font-size: 13px;
    font-weight: 600;
}

/* Exchange Calculator */
.exchange-box {
    background: white;
    border-radius: 16px;
    padding: 20px;
    margin-bottom: 15px;
    box-shadow: 0 2px 8px var(--shadow);
}

.exchange-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 15px;
}

.exchange-icon {
    width: 40px;
    height: 40px;
    border-radius: 12px;
    background: var(--bg-gradient);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 20px;
}

.rate-badge {
    background: rgba(99, 102, 241, 0.1);
    color: var(--primary);
    padding: 6px 12px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
}

/* Loading Spinner */
.spinner {
    border: 3px solid var(--border);
    border-top: 3px solid var(--primary);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin: 20px auto;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Empty State */
.empty-state {
    text-align: center;
    padding: 40px 20px;
}

.empty-icon {
    font-size: 64px;
    margin-bottom: 15px;
    opacity: 0.3;
}

.empty-text {
    font-size: 16px;
    color: var(--gray);
}

/* Filter Tabs */
.filter-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    overflow-x: auto;
    padding-bottom: 5px;
}

.filter-tab {
    padding: 8px 16px;
    border-radius: 20px;
    border: 2px solid var(--border);
    background: white;
    cursor: pointer;
    white-space: nowrap;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.3s;
}

.filter-tab.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 2000;
    padding: 20px;
    overflow-y: auto;
}

.modal.active {
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-content {
    background: white;
    border-radius: 20px;
    padding: 25px;
    max-width: 500px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
}

.modal-title {
    font-size: 20px;
    font-weight: 700;
}

.modal-close {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    border: none;
    background: var(--light);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    transition: all 0.3s;
}

.modal-close:active {
    transform: scale(0.9);
}

/* Reports */
.report-section {
    margin-bottom: 30px;
}

.report-title {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.report-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

.report-item {
    background: white;
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 2px 6px var(--shadow);
}

.report-label {
    font-size: 13px;
    color: var(--gray);
    margin-bottom: 8px;
}

.report-value {
    font-size: 20px;
    font-weight: 700;
    color: var(--primary);
}

/* Responsive */
@media (min-width: 768px) {
    body {
        max-width: 480px;
        margin: 0 auto;
        box-shadow: 0 0 20px var(--shadow);
    }
    
    .header,
    .bottom-nav {
        max-width: 480px;
        margin: 0 auto;
    }
}

/* Currency Specific Colors */
.currency-AFN {
    background: linear-gradient(135deg, #D32F2F 0%, #C62828 100%);
}

.currency-TRY {
    background: linear-gradient(135deg, #E53935 0%, #C62828 100%);
}

.currency-USD {
    background: linear-gradient(135deg, #1976D2 0%, #1565C0 100%);
}

.currency-AED {
    background: linear-gradient(135deg, #00796B 0%, #00695C 100%);
}

/* Toast Notification */
.toast {
    position: fixed;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.85);
    color: white;
    padding: 12px 24px;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 600;
    z-index: 3000;
    animation: slideUp 0.3s;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translate(-50%, 20px);
    }
    to {
        opacity: 1;
        transform: translate(-50%, 0);
    }
}
</style>
</head>
<body>

<!-- Header -->
<div class="header">
    <div class="header-title">
        <div class="header-logo">ğŸ’°</div>
        <span>Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø®Ø§Ø¯Ù…ÛŒ</span>
    </div>
</div>

<!-- Dashboard Page -->
<div class="page active" id="dashboardPage">
    <!-- Currency Cards -->
    <div class="currency-grid">
        <div class="currency-card currency-AFN">
            <div class="currency-flag">ğŸ‡¦ğŸ‡«</div>
            <div class="currency-name">Ø§ÙØºØ§Ù†ÛŒ</div>
            <div class="currency-amount" id="balanceAFN">0</div>
            <div style="font-size: 12px; opacity: 0.8;">Ø§ÙØºØ§Ù†Ø³ØªØ§Ù†</div>
        </div>
        <div class="currency-card currency-TRY">
            <div class="currency-flag">ğŸ‡¹ğŸ‡·</div>
            <div class="currency-name">Ù„ÛŒØ±Ù‡</div>
            <div class="currency-amount" id="balanceTRY">0</div>
            <div style="font-size: 12px; opacity: 0.8;">ØªØ±Ú©ÛŒÙ‡</div>
        </div>
        <div class="currency-card currency-USD">
            <div class="currency-flag">ğŸ‡ºğŸ‡¸</div>
            <div class="currency-name">Ø¯Ø§Ù„Ø±</div>
            <div class="currency-amount" id="balanceUSD">0</div>
            <div style="font-size: 12px; opacity: 0.8;">Ø¢Ù…Ø±ÛŒÚ©Ø§</div>
        </div>
        <div class="currency-card currency-AED">
            <div class="currency-flag">ğŸ‡¦ğŸ‡ª</div>
            <div class="currency-name">Ø¯Ø±Ù‡Ù…</div>
            <div class="currency-amount" id="balanceAED">0</div>
            <div style="font-size: 12px; opacity: 0.8;">Ø¯Ø¨ÛŒ</div>
        </div>
    </div>

    <!-- Quick Stats -->
    <div class="card">
        <div class="card-header">
            <div class="card-icon">ğŸ“Š</div>
            Ø¢Ù…Ø§Ø± Ø³Ø±ÛŒØ¹
        </div>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="totalIncome">0</div>
                <div class="stat-label">Ú©Ù„ Ø¯Ø±Ø¢Ù…Ø¯</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalExpense">0</div>
                <div class="stat-label">Ú©Ù„ Ù‡Ø²ÛŒÙ†Ù‡</div>
            </div>
        </div>
    </div>

    <!-- Recent Transactions -->
    <div class="card">
        <div class="card-header">
            <div class="card-icon">ğŸ“</div>
            ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±
        </div>
        <div class="transaction-list" id="recentTransactions">
            <div class="empty-state">
                <div class="empty-icon">ğŸ“­</div>
                <div class="empty-text">Ù‡Ù†ÙˆØ² ØªØ±Ø§Ú©Ù†Ø´ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</div>
            </div>
        </div>
    </div>
</div>

<!-- Transactions Page -->
<div class="page" id="transactionsPage">
    <!-- Filter Tabs -->
    <div class="filter-tabs">
        <button class="filter-tab active" onclick="filterTransactions('all')">Ù‡Ù…Ù‡</button>
        <button class="filter-tab" onclick="filterTransactions('income')">Ø¯Ø±Ø¢Ù…Ø¯</button>
        <button class="filter-tab" onclick="filterTransactions('expense')">Ù‡Ø²ÛŒÙ†Ù‡</button>
        <button class="filter-tab" onclick="filterTransactions('transfer')">Ø§Ù†ØªÙ‚Ø§Ù„</button>
    </div>

    <!-- Transaction List -->
    <div class="transaction-list" id="allTransactions">
        <div class="empty-state">
            <div class="empty-icon">ğŸ“‹</div>
            <div class="empty-text">ØªØ±Ø§Ú©Ù†Ø´ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</div>
        </div>
    </div>
</div>

<!-- Add Transaction Page -->
<div class="page" id="addPage">
    <div class="card">
        <div class="card-header">
            <div class="card-icon">â•</div>
            Ø§ÙØ²ÙˆØ¯Ù† ØªØ±Ø§Ú©Ù†Ø´ Ø¬Ø¯ÛŒØ¯
        </div>

        <div class="country-selector">
            <button class="country-btn active" onclick="selectCountry('AFG')">
                <div class="country-flag">ğŸ‡¦ğŸ‡«</div>
                <div class="country-name">Ø§ÙØºØ§Ù†Ø³ØªØ§Ù†</div>
            </button>
            <button class="country-btn" onclick="selectCountry('TUR')">
                <div class="country-flag">ğŸ‡¹ğŸ‡·</div>
                <div class="country-name">ØªØ±Ú©ÛŒÙ‡</div>
            </button>
            <button class="country-btn" onclick="selectCountry('UAE')">
                <div class="country-flag">ğŸ‡¦ğŸ‡ª</div>
                <div class="country-name">Ø¯Ø¨ÛŒ</div>
            </button>
        </div>

        <form id="transactionForm">
            <div class="form-group">
                <label class="form-label">Ù†ÙˆØ¹ ØªØ±Ø§Ú©Ù†Ø´</label>
                <select class="form-select" id="transactionType" required>
                    <option value="income">Ø¯Ø±Ø¢Ù…Ø¯ â•</option>
                    <option value="expense">Ù‡Ø²ÛŒÙ†Ù‡ â–</option>
                    <option value="transfer">Ø§Ù†ØªÙ‚Ø§Ù„ ÙˆØ¬Ù‡ ğŸ”„</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">Ø§Ø±Ø²</label>
                <select class="form-select" id="currency" required>
                    <option value="AFN">Ø§ÙØºØ§Ù†ÛŒ ğŸ‡¦ğŸ‡«</option>
                    <option value="TRY">Ù„ÛŒØ±Ù‡ ğŸ‡¹ğŸ‡·</option>
                    <option value="USD">Ø¯Ø§Ù„Ø± ğŸ‡ºğŸ‡¸</option>
                    <option value="AED">Ø¯Ø±Ù‡Ù… ğŸ‡¦ğŸ‡ª</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">Ù…Ø¨Ù„Øº</label>
                <input type="number" class="form-input" id="amount" placeholder="Ù…Ø¨Ù„Øº Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯" required step="0.01">
            </div>

            <div class="form-group">
                <label class="form-label">Ø´Ø±Ø­</label>
                <input type="text" class="form-input" id="description" placeholder="Ø´Ø±Ø­ ØªØ±Ø§Ú©Ù†Ø´" required>
            </div>

            <div class="form-group" id="transferCurrencyGroup" style="display: none;">
                <label class="form-label">Ø¨Ù‡ Ø§Ø±Ø²</label>
                <select class="form-select" id="toCurrency">
                    <option value="AFN">Ø§ÙØºØ§Ù†ÛŒ ğŸ‡¦ğŸ‡«</option>
                    <option value="TRY">Ù„ÛŒØ±Ù‡ ğŸ‡¹ğŸ‡·</option>
                    <option value="USD">Ø¯Ø§Ù„Ø± ğŸ‡ºğŸ‡¸</option>
                    <option value="AED">Ø¯Ø±Ù‡Ù… ğŸ‡¦ğŸ‡ª</option>
                </select>
            </div>

            <button type="submit" class="btn btn-primary btn-block">
                âœ… Ø«Ø¨Øª ØªØ±Ø§Ú©Ù†Ø´
            </button>
        </form>
    </div>
</div>

<!-- Exchange Page -->
<div class="page" id="exchangePage">
    <div class="card">
        <div class="card-header">
            <div class="card-icon">ğŸ’±</div>
            ØªØ¨Ø¯ÛŒÙ„ Ø§Ø±Ø²
        </div>

        <div class="exchange-box">
            <div class="exchange-header">
                <div class="exchange-icon">ğŸ“¤</div>
                <div class="rate-badge">Ø§Ø²</div>
            </div>
            <div class="form-group">
                <select class="form-select" id="fromCurrency">
                    <option value="AFN">Ø§ÙØºØ§Ù†ÛŒ ğŸ‡¦ğŸ‡«</option>
                    <option value="TRY">Ù„ÛŒØ±Ù‡ ğŸ‡¹ğŸ‡·</option>
                    <option value="USD">Ø¯Ø§Ù„Ø± ğŸ‡ºğŸ‡¸</option>
                    <option value="AED">Ø¯Ø±Ù‡Ù… ğŸ‡¦ğŸ‡ª</option>
                </select>
            </div>
            <div class="form-group">
                <input type="number" class="form-input" id="fromAmount" placeholder="Ù…Ø¨Ù„Øº" step="0.01">
            </div>
        </div>

        <div style="text-align: center; margin: -10px 0; font-size: 24px;">â¬‡ï¸</div>

        <div class="exchange-box">
            <div class="exchange-header">
                <div class="exchange-icon">ğŸ“¥</div>
                <div class="rate-badge" id="exchangeRate">Ù†Ø±Ø®: -</div>
            </div>
            <div class="form-group">
                <select class="form-select" id="toCurrencyExchange">
                    <option value="USD">Ø¯Ø§Ù„Ø± ğŸ‡ºğŸ‡¸</option>
                    <option value="AFN">Ø§ÙØºØ§Ù†ÛŒ ğŸ‡¦ğŸ‡«</option>
                    <option value="TRY">Ù„ÛŒØ±Ù‡ ğŸ‡¹ğŸ‡·</option>
                    <option value="AED">Ø¯Ø±Ù‡Ù… ğŸ‡¦ğŸ‡ª</option>
                </select>
            </div>
            <div class="form-group">
                <input type="number" class="form-input" id="toAmount" placeholder="Ø¯Ø±ÛŒØ§ÙØªÛŒ" readonly>
            </div>
        </div>

        <button class="btn btn-primary btn-block" onclick="executeExchange()">
            ğŸ’± ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†
        </button>
    </div>

    <!-- Exchange Rates -->
    <div class="card">
        <div class="card-header">
            <div class="card-icon">ğŸ“ˆ</div>
            Ù†Ø±Ø®â€ŒÙ‡Ø§ÛŒ Ø§Ø±Ø²
        </div>
        <div class="report-grid">
            <div class="report-item">
                <div class="report-label">USD Ø¨Ù‡ AFN</div>
                <div class="report-value" id="rateUSD_AFN">-</div>
            </div>
            <div class="report-item">
                <div class="report-label">USD Ø¨Ù‡ TRY</div>
                <div class="report-value" id="rateUSD_TRY">-</div>
            </div>
            <div class="report-item">
                <div class="report-label">USD Ø¨Ù‡ AED</div>
                <div class="report-value" id="rateUSD_AED">-</div>
            </div>
            <div class="report-item">
                <div class="report-label">EUR Ø¨Ù‡ USD</div>
                <div class="report-value" id="rateEUR_USD">-</div>
            </div>
        </div>
    </div>
</div>

<!-- Reports Page -->
<div class="page" id="reportsPage">
    <div class="card">
        <div class="card-header">
            <div class="card-icon">ğŸ“Š</div>
            Ú¯Ø²Ø§Ø±Ø´ Ù…Ø§Ù„ÛŒ
        </div>

        <div class="report-section">
            <div class="report-title">ğŸ’° Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø¨Ù‡ ØªÙÚ©ÛŒÚ© Ø§Ø±Ø²</div>
            <div class="report-grid">
                <div class="report-item">
                    <div class="report-label">ğŸ‡¦ğŸ‡« Ø§ÙØºØ§Ù†ÛŒ</div>
                    <div class="report-value" id="reportAFN">0</div>
                </div>
                <div class="report-item">
                    <div class="report-label">ğŸ‡¹ğŸ‡· Ù„ÛŒØ±Ù‡</div>
                    <div class="report-value" id="reportTRY">0</div>
                </div>
                <div class="report-item">
                    <div class="report-label">ğŸ‡ºğŸ‡¸ Ø¯Ø§Ù„Ø±</div>
                    <div class="report-value" id="reportUSD">0</div>
                </div>
                <div class="report-item">
                    <div class="report-label">ğŸ‡¦ğŸ‡ª Ø¯Ø±Ù‡Ù…</div>
                    <div class="report-value" id="reportAED">0</div>
                </div>
            </div>
        </div>

        <div class="report-section">
            <div class="report-title">ğŸ“ˆ Ø®Ù„Ø§ØµÙ‡ Ù…Ø§Ù„ÛŒ</div>
            <div class="report-grid">
                <div class="report-item">
                    <div class="report-label">Ú©Ù„ Ø¯Ø±Ø¢Ù…Ø¯</div>
                    <div class="report-value" id="reportTotalIncome" style="color: var(--success);">0</div>
                </div>
                <div class="report-item">
                    <div class="report-label">Ú©Ù„ Ù‡Ø²ÛŒÙ†Ù‡</div>
                    <div class="report-value" id="reportTotalExpense" style="color: var(--danger);">0</div>
                </div>
            </div>
        </div>

        <div class="report-section">
            <div class="report-title">ğŸŒ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø¨Ù‡ ØªÙÚ©ÛŒÚ© Ú©Ø´ÙˆØ±</div>
            <div class="report-grid">
                <div class="report-item">
                    <div class="report-label">ğŸ‡¦ğŸ‡« Ø§ÙØºØ§Ù†Ø³ØªØ§Ù†</div>
                    <div class="report-value" id="reportAfghanistan">0</div>
                </div>
                <div class="report-item">
                    <div class="report-label">ğŸ‡¹ğŸ‡· ØªØ±Ú©ÛŒÙ‡</div>
                    <div class="report-value" id="reportTurkey">0</div>
                </div>
                <div class="report-item">
                    <div class="report-label">ğŸ‡¦ğŸ‡ª Ø¯Ø¨ÛŒ</div>
                    <div class="report-value" id="reportDubai">0</div>
                </div>
                <div class="report-item">
                    <div class="report-label">ğŸ“Š Ú©Ù„</div>
                    <div class="report-value" id="reportTotal">0</div>
                </div>
            </div>
        </div>

        <button class="btn btn-success btn-block" onclick="exportData()">
            ğŸ“¥ Ø®Ø±ÙˆØ¬ÛŒ Excel
        </button>
    </div>
</div>

<!-- Bottom Navigation -->
<div class="bottom-nav">
    <a class="nav-item active" href="#" onclick="showPage('dashboard')">
        <div class="nav-icon">ğŸ </div>
        <div class="nav-label">Ø®Ø§Ù†Ù‡</div>
    </a>
    <a class="nav-item" href="#" onclick="showPage('transactions')">
        <div class="nav-icon">ğŸ“‹</div>
        <div class="nav-label">ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§</div>
    </a>
    <a class="nav-item" href="#" onclick="showPage('add')">
        <div class="nav-icon">â•</div>
        <div class="nav-label">Ø§ÙØ²ÙˆØ¯Ù†</div>
    </a>
    <a class="nav-item" href="#" onclick="showPage('exchange')">
        <div class="nav-icon">ğŸ’±</div>
        <div class="nav-label">ØªØ¨Ø¯ÛŒÙ„ Ø§Ø±Ø²</div>
    </a>
    <a class="nav-item" href="#" onclick="showPage('reports')">
        <div class="nav-icon">ğŸ“Š</div>
        <div class="nav-label">Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</div>
    </a>
</div>

<script>
// Database Structure
let db = {
    transactions: [],
    balances: {
        AFN: 0,
        TRY: 0,
        USD: 0,
        AED: 0
    },
    selectedCountry: 'AFG'
};

// Exchange Rates (Ù†Ø±Ø®â€ŒÙ‡Ø§ÛŒ ØªÙ‚Ø±ÛŒØ¨ÛŒ)
const exchangeRates = {
    USD: {
        AFN: 70,
        TRY: 32,
        AED: 3.67,
        USD: 1
    },
    AFN: {
        USD: 1/70,
        TRY: 32/70,
        AED: 3.67/70,
        AFN: 1
    },
    TRY: {
        USD: 1/32,
        AFN: 70/32,
        AED: 3.67/32,
        TRY: 1
    },
    AED: {
        USD: 1/3.67,
        AFN: 70/3.67,
        TRY: 32/3.67,
        AED: 1
    }
};

// Initialize App
document.addEventListener('DOMContentLoaded', function() {
    loadData();
    updateDashboard();
    updateExchangeRates();
    
    // Form submission
    document.getElementById('transactionForm').addEventListener('submit', function(e) {
        e.preventDefault();
        addTransaction();
    });
    
    // Transaction type change
    document.getElementById('transactionType').addEventListener('change', function() {
        const transferGroup = document.getElementById('transferCurrencyGroup');
        transferGroup.style.display = this.value === 'transfer' ? 'block' : 'none';
    });
    
    // Exchange calculator
    document.getElementById('fromAmount').addEventListener('input', calculateExchange);
    document.getElementById('fromCurrency').addEventListener('change', calculateExchange);
    document.getElementById('toCurrencyExchange').addEventListener('change', calculateExchange);
});

// Load data from localStorage
function loadData() {
    const saved = localStorage.getItem('khademiFamilyAccounting');
    if (saved) {
        db = JSON.parse(saved);
    }
}

// Save data to localStorage
function saveData() {
    localStorage.setItem('khademiFamilyAccounting', JSON.stringify(db));
}

// Show page
function showPage(page) {
    // Remove active class from all pages and nav items
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    
    // Add active class to selected page and nav item
    document.getElementById(page + 'Page').classList.add('active');
    event.currentTarget.classList.add('active');
    
    // Update content
    if (page === 'dashboard') {
        updateDashboard();
    } else if (page === 'transactions') {
        displayAllTransactions();
    } else if (page === 'reports') {
        updateReports();
    }
}

// Select country
function selectCountry(country) {
    db.selectedCountry = country;
    document.querySelectorAll('.country-btn').forEach(btn => btn.classList.remove('active'));
    event.currentTarget.classList.add('active');
}

// Add transaction
function addTransaction() {
    const type = document.getElementById('transactionType').value;
    const currency = document.getElementById('currency').value;
    const amount = parseFloat(document.getElementById('amount').value);
    const description = document.getElementById('description').value;
    
    if (!amount || amount <= 0) {
        showToast('Ù„Ø·ÙØ§Ù‹ Ù…Ø¨Ù„Øº Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        return;
    }
    
    const transaction = {
        id: Date.now(),
        type: type,
        currency: currency,
        amount: amount,
        description: description,
        country: db.selectedCountry,
        date: new Date().toISOString()
    };
    
    // Update balance
    if (type === 'income') {
        db.balances[currency] += amount;
    } else if (type === 'expense') {
        if (db.balances[currency] < amount) {
            showToast('Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª');
            return;
        }
        db.balances[currency] -= amount;
    } else if (type === 'transfer') {
        const toCurrency = document.getElementById('toCurrency').value;
        if (db.balances[currency] < amount) {
            showToast('Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª');
            return;
        }
        db.balances[currency] -= amount;
        const convertedAmount = amount * exchangeRates[currency][toCurrency];
        db.balances[toCurrency] += convertedAmount;
        transaction.toCurrency = toCurrency;
        transaction.convertedAmount = convertedAmount;
    }
    
    db.transactions.push(transaction);
    saveData();
    
    // Reset form
    document.getElementById('transactionForm').reset();
    
    showToast('ØªØ±Ø§Ú©Ù†Ø´ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯ âœ…');
    
    // Go to dashboard
    setTimeout(() => {
        showPage('dashboard');
    }, 1000);
}

// Update dashboard
function updateDashboard() {
    // Update currency cards
    document.getElementById('balanceAFN').textContent = formatNumber(db.balances.AFN);
    document.getElementById('balanceTRY').textContent = formatNumber(db.balances.TRY);
    document.getElementById('balanceUSD').textContent = formatNumber(db.balances.USD);
    document.getElementById('balanceAED').textContent = formatNumber(db.balances.AED);
    
    // Calculate totals
    let totalIncome = 0;
    let totalExpense = 0;
    
    db.transactions.forEach(t => {
        if (t.type === 'income') {
            totalIncome += t.amount;
        } else if (t.type === 'expense') {
            totalExpense += t.amount;
        }
    });
    
    document.getElementById('totalIncome').textContent = formatNumber(totalIncome);
    document.getElementById('totalExpense').textContent = formatNumber(totalExpense);
    
    // Display recent transactions
    displayRecentTransactions();
}

// Display recent transactions
function displayRecentTransactions() {
    const container = document.getElementById('recentTransactions');
    const recent = db.transactions.slice(-5).reverse();
    
    if (recent.length === 0) {
        container.innerHTML = `
            <div class="empty-state">
                <div class="empty-icon">ğŸ“­</div>
                <div class="empty-text">Ù‡Ù†ÙˆØ² ØªØ±Ø§Ú©Ù†Ø´ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</div>
            </div>
        `;
        return;
    }
    
    container.innerHTML = recent.map(t => {
        const icon = t.type === 'income' ? 'ğŸ’°' : t.type === 'expense' ? 'ğŸ’¸' : 'ğŸ”„';
        const amountClass = t.type === 'income' ? 'income' : 'expense';
        const sign = t.type === 'income' ? '+' : '-';
        
        return `
            <div class="transaction-item">
                <div class="transaction-icon ${t.type}">
                    ${icon}
                </div>
                <div class="transaction-info">
                    <div class="transaction-title">${t.description}</div>
                    <div class="transaction-desc">${formatDate(t.date)} â€¢ ${getCurrencyName(t.currency)}</div>
                </div>
                <div class="transaction-amount ${amountClass}">
                    ${t.type !== 'transfer' ? sign : ''}${formatNumber(t.amount)}
                </div>
            </div>
        `;
    }).join('');
}

// Display all transactions
function displayAllTransactions() {
    const container = document.getElementById('allTransactions');
    const sorted = [...db.transactions].reverse();
    
    if (sorted.length === 0) {
        container.innerHTML = `
            <div class="empty-state">
                <div class="empty-icon">ğŸ“‹</div>
                <div class="empty-text">ØªØ±Ø§Ú©Ù†Ø´ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</div>
            </div>
        `;
        return;
    }
    
    container.innerHTML = sorted.map(t => {
        const icon = t.type === 'income' ? 'ğŸ’°' : t.type === 'expense' ? 'ğŸ’¸' : 'ğŸ”„';
        const amountClass = t.type === 'income' ? 'income' : 'expense';
        const sign = t.type === 'income' ? '+' : t.type === 'expense' ? '-' : '';
        
        return `
            <div class="transaction-item" data-type="${t.type}">
                <div class="transaction-icon ${t.type}">
                    ${icon}
                </div>
                <div class="transaction-info">
                    <div class="transaction-title">${t.description}</div>
                    <div class="transaction-desc">${formatDate(t.date)} â€¢ ${getCurrencyName(t.currency)}</div>
                </div>
                <div class="transaction-amount ${amountClass}">
                    ${sign}${formatNumber(t.amount)}
                </div>
            </div>
        `;
    }).join('');
}

// Filter transactions
function filterTransactions(filter) {
    // Update active tab
    document.querySelectorAll('.filter-tab').forEach(tab => tab.classList.remove('active'));
    event.currentTarget.classList.add('active');
    
    // Filter items
    const items = document.querySelectorAll('#allTransactions .transaction-item');
    items.forEach(item => {
        if (filter === 'all') {
            item.style.display = 'flex';
        } else {
            item.style.display = item.dataset.type === filter ? 'flex' : 'none';
        }
    });
}

// Calculate exchange
function calculateExchange() {
    const from = document.getElementById('fromCurrency').value;
    const to = document.getElementById('toCurrencyExchange').value;
    const amount = parseFloat(document.getElementById('fromAmount').value);
    
    if (!amount || amount <= 0) {
        document.getElementById('toAmount').value = '';
        document.getElementById('exchangeRate').textContent = 'Ù†Ø±Ø®: -';
        return;
    }
    
    const rate = exchangeRates[from][to];
    const result = amount * rate;
    
    document.getElementById('toAmount').value = result.toFixed(2);
    document.getElementById('exchangeRate').textContent = `Ù†Ø±Ø®: ${rate.toFixed(4)}`;
}

// Execute exchange
function executeExchange() {
    const from = document.getElementById('fromCurrency').value;
    const to = document.getElementById('toCurrencyExchange').value;
    const amount = parseFloat(document.getElementById('fromAmount').value);
    
    if (!amount || amount <= 0) {
        showToast('Ù„Ø·ÙØ§Ù‹ Ù…Ø¨Ù„Øº Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        return;
    }
    
    if (db.balances[from] < amount) {
        showToast('Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª');
        return;
    }
    
    const rate = exchangeRates[from][to];
    const result = amount * rate;
    
    // Update balances
    db.balances[from] -= amount;
    db.balances[to] += result;
    
    // Add transaction
    const transaction = {
        id: Date.now(),
        type: 'transfer',
        currency: from,
        amount: amount,
        toCurrency: to,
        convertedAmount: result,
        description: `ØªØ¨Ø¯ÛŒÙ„ ${getCurrencyName(from)} Ø¨Ù‡ ${getCurrencyName(to)}`,
        country: db.selectedCountry,
        date: new Date().toISOString()
    };
    
    db.transactions.push(transaction);
    saveData();
    
    showToast('ØªØ¨Ø¯ÛŒÙ„ Ø§Ø±Ø² Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯ âœ…');
    
    // Reset form
    document.getElementById('fromAmount').value = '';
    document.getElementById('toAmount').value = '';
    
    updateDashboard();
}

// Update exchange rates display
function updateExchangeRates() {
    document.getElementById('rateUSD_AFN').textContent = exchangeRates.USD.AFN.toFixed(2);
    document.getElementById('rateUSD_TRY').textContent = exchangeRates.USD.TRY.toFixed(2);
    document.getElementById('rateUSD_AED').textContent = exchangeRates.USD.AED.toFixed(2);
    document.getElementById('rateEUR_USD').textContent = '1.08';
}

// Update reports
function updateReports() {
    // Currency balances
    document.getElementById('reportAFN').textContent = formatNumber(db.balances.AFN);
    document.getElementById('reportTRY').textContent = formatNumber(db.balances.TRY);
    document.getElementById('reportUSD').textContent = formatNumber(db.balances.USD);
    document.getElementById('reportAED').textContent = formatNumber(db.balances.AED);
    
    // Totals
    let totalIncome = 0;
    let totalExpense = 0;
    
    db.transactions.forEach(t => {
        if (t.type === 'income') totalIncome += t.amount;
        if (t.type === 'expense') totalExpense += t.amount;
    });
    
    document.getElementById('reportTotalIncome').textContent = formatNumber(totalIncome);
    document.getElementById('reportTotalExpense').textContent = formatNumber(totalExpense);
    
    // Country balances (example calculation)
    const totalUSD = db.balances.USD + (db.balances.AFN / exchangeRates.USD.AFN) + 
                     (db.balances.TRY / exchangeRates.USD.TRY) + 
                     (db.balances.AED / exchangeRates.USD.AED);
    
    document.getElementById('reportAfghanistan').textContent = formatNumber(db.balances.AFN) + ' AFN';
    document.getElementById('reportTurkey').textContent = formatNumber(db.balances.TRY) + ' TRY';
    document.getElementById('reportDubai').textContent = formatNumber(db.balances.AED) + ' AED';
    document.getElementById('reportTotal').textContent = formatNumber(totalUSD) + ' USD';
}

// Export data
function exportData() {
    const data = JSON.stringify(db, null, 2);
    const blob = new Blob([data], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `khademi-accounting-${Date.now()}.json`;
    a.click();
    URL.revokeObjectURL(url);
    showToast('ÙØ§ÛŒÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯ ğŸ“¥');
}

// Helper functions
function formatNumber(num) {
    return new Intl.NumberFormat('fa-IR', {
        maximumFractionDigits: 2
    }).format(num);
}

function formatDate(dateString) {
    const date = new Date(dateString);
    return new Intl.DateTimeFormat('fa-IR', {
        year: 'numeric',
        month: 'short',
        day: 'numeric'
    }).format(date);
}

function getCurrencyName(code) {
    const names = {
        'AFN': 'Ø§ÙØºØ§Ù†ÛŒ',
        'TRY': 'Ù„ÛŒØ±Ù‡',
        'USD': 'Ø¯Ø§Ù„Ø±',
        'AED': 'Ø¯Ø±Ù‡Ù…'
    };
    return names[code] || code;
}

function showToast(message) {
    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.textContent = message;
    document.body.appendChild(toast);
    
    setTimeout(() => {
        toast.remove();
    }, 3000);
}
</script>

</body>
</html>